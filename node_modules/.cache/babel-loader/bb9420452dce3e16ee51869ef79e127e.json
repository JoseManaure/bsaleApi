{"ast":null,"code":"import _slicedToArray from \"/Users/jnanaure87/Desktop/Web_Personal_IC_ConBsaleProductos/web-personal-client-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jnanaure87/Desktop/Web_Personal_IC_ConBsaleProductos/web-personal-client-master/src/pages/Admin/Blog/Blog.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Button, notification } from \"antd\";\nimport { withRouter } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport Modal from \"../../../components/Modal\";\nimport PostsList from \"../../../components/Admin/Blog/PostsList\";\nimport Pagination from \"../../../components/Pagination\";\nimport AddEditPostForm from \"../../../components/Admin/Blog/AddEditPostForm\";\nimport { getPostsApi } from \"../../../api/post\";\nimport \"./Blog.scss\";\n\nfunction Blog(props) {\n  const location = props.location,\n        history = props.history;\n\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        posts = _useState2[0],\n        setPosts = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        reloadPosts = _useState4[0],\n        setReloadPosts = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isVisibleModal = _useState6[0],\n        setIsVisibleModal = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        modalTitle = _useState8[0],\n        setModalTitle = _useState8[1];\n\n  const _useState9 = useState(null),\n        _useState10 = _slicedToArray(_useState9, 2),\n        modalContent = _useState10[0],\n        setModalContent = _useState10[1];\n\n  const _queryString$parse = queryString.parse(location.search),\n        _queryString$parse$pa = _queryString$parse.page,\n        page = _queryString$parse$pa === void 0 ? 1 : _queryString$parse$pa;\n\n  useEffect(() => {\n    getPostsApi(12, page).then(response => {\n      if ((response === null || response === void 0 ? void 0 : response.code) !== 200) {\n        notification[\"warning\"]({\n          message: response.message\n        });\n      } else {\n        setPosts(response.posts);\n      }\n    }).catch(() => {\n      notification[\"error\"]({\n        message: \"Error del servidor.\"\n      });\n    });\n    setReloadPosts(false);\n  }, [page, reloadPosts]);\n\n  const addPost = () => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Creando nuevo post\");\n    setModalContent(React.createElement(AddEditPostForm, {\n      setIsVisibleModal: setIsVisibleModal,\n      setReloadPosts: setReloadPosts,\n      post: null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }));\n  };\n\n  const editPost = post => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Editar post\");\n    setModalContent(React.createElement(AddEditPostForm, {\n      setIsVisibleModal: setIsVisibleModal,\n      setReloadPosts: setReloadPosts,\n      post: post,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }));\n  };\n\n  if (!posts) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: \"blog\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"blog__add-post\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"primary\",\n    onClick: addPost,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Nuevo post\")), React.createElement(PostsList, {\n    posts: posts,\n    setReloadPosts: setReloadPosts,\n    editPost: editPost,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(Pagination, {\n    posts: posts,\n    location: location,\n    history: history,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), React.createElement(Modal, {\n    title: modalTitle,\n    isVisible: isVisibleModal,\n    setIsVisible: setIsVisibleModal,\n    width: \"75%\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, modalContent));\n}\n\nexport default withRouter(Blog);","map":{"version":3,"sources":["/Users/jnanaure87/Desktop/Web_Personal_IC_ConBsaleProductos/web-personal-client-master/src/pages/Admin/Blog/Blog.js"],"names":["React","useState","useEffect","Button","notification","withRouter","queryString","Modal","PostsList","Pagination","AddEditPostForm","getPostsApi","Blog","props","location","history","posts","setPosts","reloadPosts","setReloadPosts","isVisibleModal","setIsVisibleModal","modalTitle","setModalTitle","modalContent","setModalContent","parse","search","page","then","response","code","message","catch","addPost","editPost","post"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Button, notification } from \"antd\";\nimport { withRouter } from \"react-router-dom\";\nimport queryString from \"query-string\";\nimport Modal from \"../../../components/Modal\";\nimport PostsList from \"../../../components/Admin/Blog/PostsList\";\nimport Pagination from \"../../../components/Pagination\";\nimport AddEditPostForm from \"../../../components/Admin/Blog/AddEditPostForm\";\nimport { getPostsApi } from \"../../../api/post\";\n\nimport \"./Blog.scss\";\n\nfunction Blog(props) {\n  const { location, history } = props;\n  const [posts, setPosts] = useState(null);\n  const [reloadPosts, setReloadPosts] = useState(false);\n  const [isVisibleModal, setIsVisibleModal] = useState(false);\n  const [modalTitle, setModalTitle] = useState(\"\");\n  const [modalContent, setModalContent] = useState(null);\n  const { page = 1 } = queryString.parse(location.search);\n\n  useEffect(() => {\n    getPostsApi(12, page)\n      .then(response => {\n        if (response?.code !== 200) {\n          notification[\"warning\"]({\n            message: response.message\n          });\n        } else {\n          setPosts(response.posts);\n        }\n      })\n      .catch(() => {\n        notification[\"error\"]({\n          message: \"Error del servidor.\"\n        });\n      });\n    setReloadPosts(false);\n  }, [page, reloadPosts]);\n\n  const addPost = () => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Creando nuevo post\");\n    setModalContent(\n      <AddEditPostForm\n        setIsVisibleModal={setIsVisibleModal}\n        setReloadPosts={setReloadPosts}\n        post={null}\n      />\n    );\n  };\n\n  const editPost = post => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Editar post\");\n    setModalContent(\n      <AddEditPostForm\n        setIsVisibleModal={setIsVisibleModal}\n        setReloadPosts={setReloadPosts}\n        post={post}\n      />\n    );\n  };\n\n  if (!posts) {\n    return null;\n  }\n\n  return (\n    <div className=\"blog\">\n      <div className=\"blog__add-post\">\n        <Button type=\"primary\" onClick={addPost}>\n          Nuevo post\n        </Button>\n      </div>\n      <PostsList\n        posts={posts}\n        setReloadPosts={setReloadPosts}\n        editPost={editPost}\n      />\n      <Pagination posts={posts} location={location} history={history} />\n      <Modal\n        title={modalTitle}\n        isVisible={isVisibleModal}\n        setIsVisible={setIsVisibleModal}\n        width=\"75%\"\n      >\n        {modalContent}\n      </Modal>\n    </div>\n  );\n}\n\nexport default withRouter(Blog);\n"]},"metadata":{},"sourceType":"module"}