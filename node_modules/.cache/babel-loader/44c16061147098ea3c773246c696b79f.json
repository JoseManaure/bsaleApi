{"ast":null,"code":"import _slicedToArray from \"/Users/jnanaure87/Desktop/Web_Personal_IC_ConBsaleProductos/web-personal-client-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jnanaure87/Desktop/Web_Personal_IC_ConBsaleProductos/web-personal-client-master/src/components/Admin/Stock/ListStocks/ListStocks.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { List, Button, Icon, Modal as ModalAntd, notification } from \"antd\";\nimport DragSortableList from \"react-drag-sortable\";\nimport Modal from \"../../../Modal\";\nimport AddEditProductForm from \"../AddEditProductForm\";\nimport AddEditProductForma from \"../AddEditProductForm\";\nimport { getStocksBsaleApi, deleteProductApi } from \"../../../../api/stock\";\nimport { getProductsBsaleApi } from \"../../../../api/product\";\nimport \"./ProductstList.scss\";\nconst confirm = ModalAntd.confirm;\nexport default function ListStocks(props) {\n  const stocks = props.stocks,\n        products = props.products,\n        setReloadStocks = props.setReloadStocks;\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        listStocks = _useState2[0],\n        setListStocks = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        listProducts = _useState4[0],\n        setListProducts = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isVisibleModal = _useState6[0],\n        setIsVisibleModal = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        modalTitle = _useState8[0],\n        setModalTitle = _useState8[1];\n\n  const _useState9 = useState(null),\n        _useState10 = _slicedToArray(_useState9, 2),\n        modalContent = _useState10[0],\n        setModalContent = _useState10[1];\n\n  useEffect(() => {\n    const listStockArray = [];\n    stocks.forEach(stock => {\n      listStockArray.push({\n        content: React.createElement(Stock, {\n          stock: stock // deleteProduct={deleteProduct}\n          // editProductModal={editProductModal}\n          ,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29\n          },\n          __self: this\n        })\n      });\n    });\n    setListStocks(listStockArray); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stocks]);\n  useEffect(() => {\n    const listProductArray = [];\n    products.forEach(product => {\n      listProductArray.push({\n        content: React.createElement(Product, {\n          product: product // deleteProduct={deleteProduct}\n          // editProductModal={editProductModal}\n          ,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        })\n      });\n    });\n    setListProducts(listProductArray); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [products]);\n\n  const editProductStockModal = (product, stock) => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Creando nuevo curso\");\n    setModalContent(React.createElement(AddEditProductForma, {\n      setIsVisibleModal: setIsVisibleModal,\n      setReloadStocks: setReloadStocks,\n      product: product,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }));\n  };\n\n  const addProductModal = () => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Creando nuevo curso\");\n    setModalContent(React.createElement(AddEditProductForm, {\n      setIsVisibleModal: setIsVisibleModal,\n      setReloadStocks: setReloadStocks,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }));\n  };\n\n  const editProductModal = stock => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Actualizando producto\");\n    setModalContent(React.createElement(AddEditProductForm, {\n      setIsVisibleModal: setIsVisibleModal,\n      setReloadStocks: setReloadStocks,\n      stock: stock,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }));\n  };\n\n  const deleteProduct = stock => {\n    confirm({\n      title: \"Eliminando product\",\n      content: `¿Estas seguro de que quieres eliminar el product ${stock.idProduct}?`,\n      okText: \"Eliminar\",\n      okType: \"danger\",\n      cancelText: \"Cancelar\",\n\n      onOk() {\n        deleteProductApi(stock.id).then(response => {\n          const typeNotification = response.code === 200 ? \"success\" : \"warning\";\n          notification[typeNotification]({\n            message: response.message\n          });\n          setReloadStocks(true);\n        }).catch(() => {\n          notification[\"error\"]({\n            message: \"Error del servidor, intentelo más tarde.\"\n          });\n        });\n      }\n\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"courses-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"courses-list__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"primary\",\n    onClick: addProductStock,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, \"Nuevo producto\")), React.createElement(\"div\", {\n    className: \"courses-list__items\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, listStocks.length === 0 && React.createElement(\"h2\", {\n    style: {\n      textAlign: \"center\",\n      margin: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"No tienes stock creados\"), React.createElement(DragSortableList, {\n    items: listStocks,\n    items2: listProducts,\n    type: \"vertical\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  })), React.createElement(Modal, {\n    title: modalTitle,\n    isVisible: isVisibleModal,\n    setIsVisible: setIsVisibleModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, modalContent));\n}\n\nfunction Stock(props) {\n  const stock = props.stock,\n        deleteProduct = props.deleteProduct,\n        editProductModal = props.editProductModal;\n\n  const _useState11 = useState(null),\n        _useState12 = _slicedToArray(_useState11, 2),\n        stockData = _useState12[0],\n        setStockData = _useState12[1];\n\n  useEffect(() => {\n    getStocksBsaleApi(stock.id).then(response => {\n      if (response.code !== 200) {\n        notification[\"warning\"]({\n          message: `El stock con el id ${stock.id} no se ha encontrado.`\n        });\n      }\n\n      setStockData(response.data);\n    });\n  }, [stock]);\n\n  if (!stockData) {\n    return null;\n  }\n\n  return React.createElement(List.Item, {\n    actions: [React.createElement(Button, {\n      type: \"primary\",\n      onClick: () => editProductModal(stock),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })), React.createElement(Button, {\n      type: \"danger\",\n      onClick: () => deleteProduct(stock),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"delete\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }))],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(List.Item.Meta, {\n    title: `${stockData.variantValue} | ID: ${stockData.id}`,\n    description: stockData.variantValueWithTaxes,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }));\n}\n\nfunction Product(props) {\n  const product = props.product,\n        deleteProduct = props.deleteProduct,\n        editProductModal = props.editProductModal;\n\n  const _useState13 = useState(null),\n        _useState14 = _slicedToArray(_useState13, 2),\n        productData = _useState14[0],\n        setProductData = _useState14[1];\n\n  useEffect(() => {\n    getProductsBsaleApi(product.id).then(response => {\n      if (response.code !== 200) {\n        notification[\"warning\"]({\n          message: `El producto con el id ${product.id} no se ha encontrado.`\n        });\n      }\n\n      setProductData(response.data);\n    });\n  }, [product]);\n\n  if (!productData) {\n    return null;\n  }\n\n  return React.createElement(List.Item, {\n    actions: [React.createElement(Button, {\n      type: \"primary\",\n      onClick: () => editProductModal(product),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"edit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    })), React.createElement(Button, {\n      type: \"danger\",\n      onClick: () => deleteProduct(product),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      type: \"delete\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }))],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, React.createElement(List.Item.Meta, {\n    title: `${productData.variantValue} ${productData.variantValue} | ID: ${productData.id}`,\n    description: productData.variantValueWithTaxes,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/Users/jnanaure87/Desktop/Web_Personal_IC_ConBsaleProductos/web-personal-client-master/src/components/Admin/Stock/ListStocks/ListStocks.js"],"names":["React","useState","useEffect","List","Button","Icon","Modal","ModalAntd","notification","DragSortableList","AddEditProductForm","AddEditProductForma","getStocksBsaleApi","deleteProductApi","getProductsBsaleApi","confirm","ListStocks","props","stocks","products","setReloadStocks","listStocks","setListStocks","listProducts","setListProducts","isVisibleModal","setIsVisibleModal","modalTitle","setModalTitle","modalContent","setModalContent","listStockArray","forEach","stock","push","content","listProductArray","product","editProductStockModal","addProductModal","editProductModal","deleteProduct","title","idProduct","okText","okType","cancelText","onOk","id","then","response","typeNotification","code","message","catch","addProductStock","length","textAlign","margin","Stock","stockData","setStockData","data","variantValue","variantValueWithTaxes","Product","productData","setProductData"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { List, Button, Icon, Modal as ModalAntd, notification } from \"antd\";\nimport DragSortableList from \"react-drag-sortable\";\nimport Modal from \"../../../Modal\";\nimport AddEditProductForm from \"../AddEditProductForm\";\nimport AddEditProductForma from \"../AddEditProductForm\";\nimport {\n  getStocksBsaleApi,\n  deleteProductApi,\n} from \"../../../../api/stock\";\nimport { getProductsBsaleApi } from \"../../../../api/product\";\nimport \"./ProductstList.scss\";\n\nconst { confirm } = ModalAntd;\n\nexport default function ListStocks(props) {\n  const { stocks,products, setReloadStocks } = props;\n  const [listStocks, setListStocks] = useState([]);\n  const [listProducts, setListProducts] = useState([]);\n  const [isVisibleModal, setIsVisibleModal] = useState(false);\n  const [modalTitle, setModalTitle] = useState(\"\");\n  const [modalContent, setModalContent] = useState(null);\n\n  useEffect(() => {\n    const listStockArray = [];\n    stocks.forEach(stock => {\n        listStockArray.push({\n        content: (\n          <Stock\n            stock={stock}\n              // deleteProduct={deleteProduct}\n              // editProductModal={editProductModal}\n          />\n        )\n      });\n    });\n    setListStocks(listStockArray);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stocks]); \n\n\n  useEffect(() => {\n    const listProductArray = [];\n    products.forEach(product => {\n      listProductArray.push({\n        content: (\n          <Product\n            product={product}\n              // deleteProduct={deleteProduct}\n              // editProductModal={editProductModal}\n          />\n        )\n      });\n    });\n    setListProducts(listProductArray);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [products]);\n\n\n    const editProductStockModal = (product, stock) =>{\n      setIsVisibleModal(true);\n      setModalTitle(\"Creando nuevo curso\");\n      setModalContent(\n        <AddEditProductForma\n          setIsVisibleModal={setIsVisibleModal}\n          setReloadStocks={setReloadStocks}\n          product={product}\n        />\n      );\n    \n    }\n\n  const addProductModal = () => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Creando nuevo curso\");\n    setModalContent(\n      <AddEditProductForm\n        setIsVisibleModal={setIsVisibleModal}\n        setReloadStocks={setReloadStocks}\n      />\n    );\n  };\n\n  const editProductModal = stock => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Actualizando producto\");\n    setModalContent(\n      <AddEditProductForm\n        setIsVisibleModal={setIsVisibleModal}\n        setReloadStocks={setReloadStocks}\n        stock={stock}\n      />\n    );\n  };\n\n  const deleteProduct = stock => {\n\n    confirm({\n      title: \"Eliminando product\",\n      content: `¿Estas seguro de que quieres eliminar el product ${stock.idProduct}?`,\n      okText: \"Eliminar\",\n      okType: \"danger\",\n      cancelText: \"Cancelar\",\n      onOk() {\n        deleteProductApi(stock.id)\n          .then(response => {\n            const typeNotification =\n              response.code === 200 ? \"success\" : \"warning\";\n            notification[typeNotification]({\n              message: response.message\n            });\n            setReloadStocks(true);\n          })\n          .catch(() => {\n            notification[\"error\"]({\n              message: \"Error del servidor, intentelo más tarde.\"\n            });\n          });\n      }\n    });\n  };\n\n  return (\n    <div className=\"courses-list\">\n      <div className=\"courses-list__header\">\n        <Button type=\"primary\" onClick={addProductStock}>\n          Nuevo producto\n        </Button>\n      </div>\n\n      <div className=\"courses-list__items\">\n        {listStocks.length === 0 && (\n          <h2 style={{ textAlign: \"center\", margin: 0 }}>\n            No tienes stock creados\n          </h2>\n        )}\n        <DragSortableList items={listStocks} items2={listProducts} type=\"vertical\" />\n      </div>\n\n      <Modal\n        title={modalTitle}\n        isVisible={isVisibleModal}\n        setIsVisible={setIsVisibleModal}\n      >\n        {modalContent}\n      </Modal>\n    </div>\n  );\n}\n\nfunction Stock(props) {\n  const {stock, deleteProduct, editProductModal } = props;\n  const [stockData, setStockData] = useState(null);\n\n  useEffect(() => {\n    getStocksBsaleApi(stock.id).then(response => {\n      if (response.code !== 200) {\n        notification[\"warning\"]({\n          message: `El stock con el id ${stock.id} no se ha encontrado.`\n        }); \n      }\n      setStockData(response.data);\n    });\n  }, [stock]);\n\n\n  if (!stockData) {\n    return null;\n  }\n\n  return (\n    <List.Item\n      actions={[\n        <Button type=\"primary\" onClick={() => editProductModal(stock)}>\n          <Icon type=\"edit\" />\n        </Button>,\n        <Button type=\"danger\" onClick={() => deleteProduct(stock)}>\n          <Icon type=\"delete\" />\n        </Button>\n      ]}\n    >\n      \n      <List.Item.Meta\n        title={`${stockData.variantValue} | ID: ${stockData.id}`}\n        description={stockData.variantValueWithTaxes}\n      />\n    </List.Item>\n  );\n}\n\nfunction Product(props) {\n  const {product, deleteProduct, editProductModal } = props;\n  const [productData, setProductData] = useState(null);\n\n  useEffect(() => {\n    getProductsBsaleApi(product.id).then(response => {\n      if (response.code !== 200) {\n        notification[\"warning\"]({\n          message: `El producto con el id ${product.id} no se ha encontrado.`\n        }); \n      }\n      setProductData(response.data);\n    });\n  }, [product]);\n\n  \n  if (!productData) {\n    return null;\n  }\n\n\n  return (\n    <List.Item\n      actions={[\n        <Button type=\"primary\" onClick={() => editProductModal(product)}>\n          <Icon type=\"edit\" />\n        </Button>,\n        <Button type=\"danger\" onClick={() => deleteProduct(product)}>\n          <Icon type=\"delete\" />\n        </Button>\n      ]}\n    >\n      \n      <List.Item.Meta\n        title={`${productData.variantValue} ${productData.variantValue} | ID: ${productData.id}`}\n        description={productData.variantValueWithTaxes}\n      />\n    </List.Item>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}